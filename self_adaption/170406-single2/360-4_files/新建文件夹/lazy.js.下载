/* 2016-10-20 17:53:42 landing/luckycat/container 0.0.24  */
!function(doc,win){var defaultParams={scopeDom:doc,queryBy:"tag",queryVal:"*",dataAttr:"data-src",interval:30,offset:0,quality:75,size:"",webp:1,allowScrollCheck:1,allowResizeCheck:1,allowInstantCheck:1,onImgCreate:null,onImgError:null,onImgLoad:null,onDomCheck:null},webpUsable,webpCheck=function(){var e=[];if(/(iPad|iPod|iPhone|MSIE[\s\d\.]+);/i.test(navigator.userAgent))webpUsable=0;else{var t=function(t){webpUsable=!!t;for(var a=0,n=e.length;a<n;a++)e[a](webpUsable);e=[]},a=new Image;a.onload=function(){t(1)},a.onerror=function(){t(0)},a.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAgA0JaQAA3AA/vuUAAA="}return function(t){"function"==typeof t&&("undefined"!=typeof webpUsable?t(webpUsable):e.push(t))}}(),bind=win.addEventListener?function(e,t,a){e.addEventListener(t,a,!1)}:function(e,t,a){e.attachEvent("on"+t,a)},unbind=win.removeEventListener?function(e,t,a){e.removeEventListener(t,a,!1)}:function(e,t,a){e.detachEvent("on"+t,a)},getScrollXY=function(){var e="scrollX"in win?function(){return{x:win.scrollX,y:win.scrollY}}:function(){return{x:doc.body&&doc.body.scrollLeft||doc.documentElement.scrollLeft||0,y:doc.body&&doc.body.scrollTop||doc.documentElement.scrollTop||0}};return function(){return e()}}(),getViewLimit=function(){var e=doc.getElementsByTagName("html")[0],t=getScrollXY(),a=t.x,n=t.y,r=a+(win.innerWidth||e.offsetWidth||0),o=n+(win.innerHeight||e.offsetHeight||0);return{x1:a,y1:n,x2:r,y2:o}},getCompressUrl=function(){var e=/^(.*?)(?:_(\d+x\d+\w*?|sum|b|m|)(q\d+|)\.jpg|)(_.webp|)(\?.*|#.*|)$/;return function(t,a,n,r){return t&&t.replace(e,function(e,t,o,i,m,c){return o=o||a||"",i=i||(n?"q"+n:""),t+(o||i?"_"+o+i+".jpg":"")+(webpUsable&&(r||m)?"_.webp":"")+(c||"")})||""}}(),Lazy=function(updateParams){var self=this,params={};for(var n in Lazy.params)params[n]=updateParams&&n in updateParams?updateParams[n]:Lazy.params[n];var timeoutCheck,scopeDom=params.scopeDom,queryVal=params.queryVal,dataAttr=params.dataAttr,onImgLoad=params.onImgLoad,onImgError=params.onImgError,onImgCreate=params.onImgCreate,onDomCheck=params.onDomCheck;scopeDom&&"function"==typeof scopeDom.getElementsByTagName||(scopeDom=defaultParams.scopeDom||document),queryVal&&"string"==typeof queryVal||(queryVal=defaultParams.queryVal||"*"),dataAttr&&"string"==typeof dataAttr||(dataAttr=defaultParams.dataAttr||"src-data"),"function"!=typeof onImgLoad&&(onImgLoad=null),"function"!=typeof onImgError&&(onImgError=null),"function"!=typeof onImgCreate&&(onImgCreate=null),"function"!=typeof onDomCheck&&(onDomCheck=null);var getUrl=params.quality>0||params.webp||params.size?function(e){return getCompressUrl(e,params.size,params.quality,params.webp)}:function(e){return e},eachDoms=function(e,t){if(e)for(var a,n=0,r=e.length;n<r;n++)(a=e[n-r+e.length])&&a.getAttribute(dataAttr)&&t(a)},eachQuery=/^class$/i.test(params.queryBy)?"getElementsByClassName"in scopeDom?function(e){eachDoms(scopeDom.getElementsByClassName(queryVal),e)}:function(e){var t=new RegExp("(\\b|\\s)"+queryVal.replace(/[^\w\d_-]/g,"")+"(\\b|\\s)");eachDoms(scopeDom.getElementsByTagName("*"),function(a){t.test(a.className.replace(/^\s+|\s+$/,""))&&e(a)})}:function(e){eachDoms(scopeDom.getElementsByTagName(queryVal),e)},checkSwap=function(dom,limit){var parent=dom&&dom.parentNode;if(!parent)return!1;var src=dom.getAttribute(dataAttr);if(!src)return!1;if(onDomCheck&&onDomCheck.call(self,dom)===!1)return!1;limit=limit||getViewLimit();var bcr=dom.getBoundingClientRect(),x1=bcr.left+limit.x1-params.offset,y1=bcr.top+limit.y1-params.offset,x2=x1+dom.offsetWidth+params.offset,y2=y1+dom.offsetHeight+params.offset;if((x1>=limit.x1&&x1<limit.x2||x2>limit.x1&&x2<=limit.x2||x1<=limit.x1&&x2>=limit.x2)&&(y1>=limit.y1&&y1<limit.y2||y2>limit.y1&&y2<=limit.y2||y1<=limit.y1&&y2>=limit.y2)){var onLazy=(dom.getAttribute("onlazy")||"").replace(/^\s+|\s+$/,"");if(onLazy)try{var onLazy=eval("(function(src){"+onLazy+"})");if(onLazy.call(dom,getUrl(src))===!1)return dom.removeAttribute(dataAttr),!0}catch(e){}var img=dom;if("IMG"==dom.tagName)dom.src=getUrl(src),dom.removeAttribute(dataAttr);else{for(var attrs=[],i=0,len=dom.attributes&&dom.attributes.length;i<len;i++){var attrNode=dom.attributes[i];attrs.push(attrNode.name==dataAttr?'src="'+getUrl(attrNode.value)+'"':attrNode.name+'="'+attrNode.value+'"')}var tmp=doc.createElement("DIV");tmp.innerHTML="<img "+attrs.join(" ")+"/>",img=parent.insertBefore(tmp.firstChild,dom),parent.removeChild(dom),onImgCreate&&onImgCreate.call(self,img)}return onImgLoad&&bind(img,"load",function(e){onImgLoad.call(self,img)}),onImgError&&bind(img,"error",function(e){onImgError.call(self,img)}),!0}return!1},checkQuery=function(){var e=getViewLimit();if(params.interval>0){var t=[];eachQuery(function(e){t.push(e)}),function(a){if(clearTimeout(timeoutCheck),t.length){var n=checkSwap(t[0],e);if(t.shift(),t.length){var r=arguments.callee;n&&a>0?timeoutCheck=setTimeout(r,a):r(params.interval)}}}()}else eachQuery(function(t){checkSwap(t,e)})},check=function(e){clearTimeout(timeoutCheck),"undefined"!=typeof webpUsable&&(e>0?timeoutCheck=setTimeout(checkQuery,e):checkQuery())};this.check=check,params.allowScrollCheck&&bind(win,"scroll",function(e){check(200)}),params.allowResizeCheck&&bind(win,"resize",function(e){check(200)}),params.allowInstantCheck&&webpCheck(function(){check()})};Lazy.params=defaultParams,win.MNLAZY=Lazy,win.MNLAZY_GLOBAL_CONF&&(win.MNLAZY_GLOBAL=new Lazy(win.MNLAZY_GLOBAL_CONF))}(document,window);